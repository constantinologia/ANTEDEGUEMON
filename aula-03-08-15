#Servidor
require 'socket'
serverSocket = TCPServe.new(2000)
clientSocket = clientSocket.accept
begin
  nome_arquivo = clientSocket.gets.chomp
  tamanho_arquivo = clientSocket.gets.chomp.to_i
  bytes_arquivo = clientSocket.read (tamanho_arquio)
  arquivo = File.new("copia_#{nome_arquivo}", "wb")
  arquivo.syswrite(bytes_arquivo)
ensure
  serverSocket.close
end
#Servidor

#Cliente
require 'socket'
sock = TCPSocket.new('localhost', 2000)
begin
  nome_arquivo = gets.chomp
  arquivo = File.new(nome_arquivo, "r")
  tamanho = File::size(nome_arquivo)
  bytes_arquivo = arquivo.read(tamanho)
  sock.puts(nome_arquivo)
  sock.puts(tamano.to_s)
  sock.syswrite(bytes_arquivo)
ensure
  sock.close
  arquivo.close
end
#Cliente
